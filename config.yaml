# StrategyBuilder Configuration File

# Backtesting Parameters
backtesting:
  # Initial cash for backtesting
  cash: 10000

  # Default position sizing (1.0 = 100% of available cash)
  order_percentage: 1.0

  # Commission settings
  commission: 0.001  # 0.1% per trade

# Technical Indicator Parameters
indicators:
  # MACD settings
  macd:
    fast_period: 12
    slow_period: 26
    signal_period: 9

  # ATR settings
  atr:
    period: 14
    distance: 2.0  # Stop loss/take profit distance in ATR multiples

  # Moving Average settings
  moving_averages:
    short_period: 20
    medium_period: 50
    long_period: 200

  # Bollinger Bands
  bollinger:
    period: 20
    std_dev: 2

  # ADX settings
  adx:
    period: 14
    trend_threshold: 25  # ADX value above which market is trending

  # CMF settings
  cmf:
    period: 20

# Data Settings
data:
  # Default data interval for backtesting
  default_interval: "1d"  # Options: 1m, 5m, 15m, 30m, 1h, 90m, 1d, 5d, 1wk, 1mo

  # Default lookback period
  default_lookback_years: 1

  # Data source
  source: "yfinance"  # Yahoo Finance

# Notifications (requires environment variables)
notifications:
  # Enable/disable notifications
  telegram:
    enabled: false

  email:
    enabled: false
    smtp_server: "smtp.gmail.com"
    smtp_port: 587

# Risk Management
risk:
  # Maximum position size as percentage of portfolio
  max_position_size: 1.0

  # Default stop loss percentage (if not using ATR)
  default_stop_loss: 0.02  # 2%

  # Default take profit percentage
  default_take_profit: 0.04  # 4%

# Logging
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  save_to_file: false

# Walk-Forward Optimization
walk_forward:
  # Training period in days
  train_period_days: 252  # ~1 year

  # Testing period in days
  test_period_days: 63  # ~3 months

  # Number of walk-forward periods
  num_periods: 4

  # Anchored walk-forward (train period grows) or rolling (fixed train period)
  anchored: false

# Strategy Configurations
strategies:
  bollinger_bands:
    # Default parameters
    defaults:
      cash: 10000
      period: 20
      devfactor: 2.0

    # Parameter ranges for optimization
    optimization:
      period: [10, 15, 20, 25, 30]
      devfactor: [1.5, 2.0, 2.5, 3.0]

    # Parameter constraints
    constraints:
      period:
        min: 5
        max: 100
      devfactor:
        min: 0.5
        max: 5.0

  sma_crossover:
    defaults:
      cash: 10000
      fast_period: 10
      slow_period: 30

    optimization:
      fast_period: [5, 10, 15, 20]
      slow_period: [20, 30, 40, 50]

    constraints:
      fast_period:
        min: 2
        max: 50
      slow_period:
        min: 10
        max: 200

  rsi:
    defaults:
      cash: 10000
      period: 14
      oversold: 30
      overbought: 70

    optimization:
      period: [10, 14, 20]
      oversold: [20, 25, 30]
      overbought: [70, 75, 80]

    constraints:
      period:
        min: 5
        max: 30
      oversold:
        min: 10
        max: 40
      overbought:
        min: 60
        max: 90

  tema_macd:
    defaults:
      cash: 10000
      macd1: 12
      macd2: 26
      macdsig: 9

    optimization:
      macd1: [8, 12, 16]
      macd2: [20, 26, 32]
      macdsig: [7, 9, 11]

    constraints:
      macd1:
        min: 5
        max: 20
      macd2:
        min: 15
        max: 50
      macdsig:
        min: 5
        max: 15

# Performance Optimization
performance:
  # Use vectorized backtesting for speed
  use_vectorized: true

  # Number of parallel workers for grid search (-1 = all cores)
  parallel_workers: -1

  # Enable caching of market data
  cache_data: true

  # Cache directory
  cache_dir: "./data/cache"

# API Configuration
api:
  # FastAPI server settings
  host: "0.0.0.0"
  port: 8000

  # Enable API documentation
  docs_enabled: true

  # CORS settings
  cors:
    enabled: true
    allowed_origins: ["*"]
    allowed_methods: ["*"]
    allowed_headers: ["*"]

  # Rate limiting
  rate_limit:
    enabled: false
    requests_per_minute: 60
